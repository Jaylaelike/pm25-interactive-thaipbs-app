(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{3509:function(e,s,t){Promise.resolve().then(t.bind(t,7280))},7280:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var l=t(7200),n=t(5535),r=t(4578),a=e=>{let{title:s,num:t,desc:n,bgColors:a,children:c}=e;return(0,l.jsxs)("div",{className:"".concat(a," py-7 px-10 flex flex-col items-center justify-between space-y-4 rounded-lg"),children:[(0,l.jsx)("p",{children:s}),(0,l.jsx)(r.ZP,{height:200,width:200,maxValue:80,value:Number(t.toFixed(2)),needleColor:"black",startColor:"green",needleTransitionDuration:4e3,needleTransition:"easeElastic",ringWidth:15,segments:5,endColor:"red"}),(0,l.jsxs)("h2",{className:"text-6xl font-bold",children:[t,(0,l.jsx)("span",{className:"text-4xl font-normal",children:n})]}),c]})},c=t(172),i=t(2898),o=()=>{let[e,s]=(0,n.useState)({Irms1:0,Irms2:0,Temp1:0,Temp2:0}),[t,l]=(0,n.useState)("#2ECC71"),[r,a]=(0,n.useState)("#2ECC71");return(0,n.useEffect)(()=>{let e;let t=0;return(e=i.Z.connect("ws://172.16.202.63:8083/mqtt",{username:"admin",password:"public",clientId:"emqx_"+Math.random().toString(16).slice(2,10),keepalive:60,reconnectPeriod:5e3,connectTimeout:3e4,clean:!0})).on("connect",()=>{console.log("Connected to MQTT broker"),t=0,e.subscribe("sensor/temp")}),e.on("error",e=>{console.error("MQTT connection error:",e),t<5&&(t++,console.log("Reconnection attempt ".concat(t,"...")))}),e.on("close",()=>{console.log("MQTT connection closed")}),e.on("offline",()=>{console.log("MQTT client is offline")}),e.on("message",(e,t)=>{if("sensor/temp"===e)try{let e=t.toString().split(",").reduce((e,s)=>{let[t,l]=s.split(":");return{...e,[t]:parseFloat(l)}},{Irms1:0,Irms2:0,Temp1:0,Temp2:0});s(e),e.Temp1>23.6&&e.Temp1<28?(l("#f1c40f"),a("#f1c40f")):e.Temp1<=23.6?(l("#2ECC71"),a("#2ECC71")):e.Temp1>=28&&(l("#e3901b"),a("#e3901b"))}catch(e){console.error("Error processing message:",e)}}),()=>{e&&e.end(!0,{},()=>{console.log("MQTT connection closed cleanly")})}},[]),{sensorData:e,bgColor:t,bgColorMain:r}},x=t(7159),d=()=>{let[e,s]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s(!0)},[]);let{sensorData:t,bgColorMain:r}=o(),i="#2ECC71"===r?"bg-[#2ECC71]":"#f1c40f"===r?"bg-[#f1c40f]":"#e3901b"===r?"bg-[#e3901b]":"#e74c3c"===r?"bg-[#e74c3c]":"#3498db"===r?"bg-[#3498db]":"bg-[#2ECC71]";return(0,l.jsxs)("div",{className:"text-gray-150 p-10 flex-grow pt-0",children:[(0,l.jsxs)("div",{className:"space-x-3 text-right",children:[(0,l.jsx)("button",{className:"bg-[#2ECC71] rounded-full w-10 h-10 text-gray-100 font-bold text-xl",children:"\xb0C"}),(0,l.jsx)("button",{className:"bg-gray-150 rounded-full w-10 h-10 text-darkblue font-bold text-xl",children:"\xb0F"})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-5 my-5 gap-5 justify-center",children:e?(0,l.jsx)(c.Z,{}):null}),(0,l.jsxs)("div",{className:"my-5",children:[(0,l.jsx)("h3",{className:" text-gray-350 text-2xl font-bold mb-5",children:"BUC Temperature Status"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 justify-center",children:[(0,l.jsx)(a,{title:"อุณหภูมิ BUC ตัวที่ 1",num:t.Temp1,desc:" \xb0C",bgColors:i,children:(0,l.jsxs)("div",{className:"flex justify-between space-x-5 items-center",children:[(0,l.jsx)("div",{className:" rounded-full w-[30px] h-[30px] flex justify-center items-center",children:(0,l.jsx)(x.Z,{})}),(0,l.jsx)("p",{className:"text-gray-150 text-sm"})]})}),(0,l.jsx)(a,{title:"อุณหภูมิ BUC ตัวที่ 2",num:t.Temp2,desc:" \xb0C",bgColors:i,children:(0,l.jsxs)("div",{className:"flex justify-between space-x-5 items-center",children:[(0,l.jsx)("div",{className:" rounded-full w-[30px] h-[30px] flex justify-center items-center",children:(0,l.jsx)(x.Z,{})}),(0,l.jsx)("p",{className:"text-gray-150 text-sm"})]})})]}),(0,l.jsx)("div",{})]})]})},m=t(2423),u=t(693),f=e=>{let{bgColors:s}=e,[t,r]=(0,n.useState)(!1),a=o();return(0,l.jsx)("div",{className:"flex flex-col min-h-screen bg-[".concat(s,"] w-full lg:w-1/3 p-7 lg:p-4 xl:p-7 space-y-10 overflow-x-hidden pt-0"),children:t?(0,l.jsx)(m.Z,{onClose:()=>r(!1)}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative flex justify-between mb-10",children:(0,l.jsx)("button",{className:"static z-10 px-4 py-2 text bg-[#6E707A] hover:bg-[#6E707A]/70 text-gray-150 rounded-full shadow-lg",children:(0,l.jsx)("i",{className:"fas fa-map-marker-alt"})})}),(0,l.jsxs)("div",{className:"relative -mx-36 flex justify-center items-center max-h-40 ",children:[(0,l.jsx)(u.default,{src:"/images/Cloud-background.png",width:200,height:200,alt:"bg",className:"opacity-10 absolute max-w-52 "}),(0,l.jsx)(u.default,{src:"/images/bucpro.png",width:200,height:200,alt:"weather",className:"max-h-48 rounded-lg"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between flex-grow pt-6",children:[null!==a.sensorData.Temp1&&(0,l.jsxs)("h1",{className:"text-gray-150 text-[144px] font-medium",children:[a.sensorData.Temp1,(0,l.jsx)("span",{className:"text-5xl text-gray-500",children:"C"})]}),(0,l.jsx)("h3",{className:"font-semibold text-4xl text-gray-500",children:"Temperature 1"}),(0,l.jsxs)("div",{className:"flex flex-col items-center text-center text-gray-350 text-lg space-y-5",children:[(0,l.jsxs)("p",{children:["Today •"," ",new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("i",{className:"fas fa-map-marker-alt"})," ดาดฟ้าอาคาร A Thaipbs"]})]})]})]})})},g=function(){let{bgColorMain:e,bgColor:s}=o(),[t,r]=n.useState("bg-green-500");return n.useEffect(()=>{r("#f1c40f"===e?"bg-yellow-300":"#e3901b"===e?"bg-yellow-500":"#e74c3c"===e?"bg-red-400":"#2ECC71"===e?"bg-green-500":"#3498db"===e?"bg-blue-500":"bg-green-500")},[e]),(0,l.jsxs)("div",{className:"".concat(t," flex flex-col lg:flex-row w-full h-full"),children:[(0,l.jsx)(f,{bgColors:s}),(0,l.jsx)(d,{})]})}},172:function(e,s,t){"use strict";var l=t(7200),n=t(5535),r=t(5101),a=t(4211),c=t.n(a);s.Z=function(){let[e,s]=(0,n.useState)(c()().format("HH:mm:ss"));return(0,n.useEffect)(()=>{let e=setInterval(()=>{s(c()().format("HH:mm:ss"))},1e3);return()=>clearInterval(e)},[]),(0,l.jsx)("div",{children:(0,l.jsx)(r.E.div,{className:"flex items-center justify-center  rounded-xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:(0,l.jsx)(r.E.div,{className:"text-4xl font-mono text-white",initial:{scale:.5},animate:{scale:1},transition:{duration:.5},children:e})})})}},2423:function(e,s,t){"use strict";var l=t(7200);t(5535),s.Z=e=>{let{onClose:s}=e;return(0,l.jsxs)("div",{className:"text-gray-150",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsx)("button",{className:"text-2xl",onClick:s,children:(0,l.jsx)("i",{className:"fas fa-times"})})}),(0,l.jsxs)("div",{className:"flex justify-between my-5 space-x-4",children:[(0,l.jsx)("input",{type:"text",className:"border border-gray-150 bg-transparent p-3 flex-grow",placeholder:"search location"}),(0,l.jsx)("button",{className:"bg-[#3C47E9] py-3 px-5 hover:bg-[#3C47E9]/70",children:"Search"})]}),(0,l.jsx)("div",{className:"mt-20",children:(0,l.jsxs)("button",{className:"hover:border border-gray-250 px-4 py-6 w-full flex justify-between",children:[(0,l.jsx)("p",{children:"London"}),(0,l.jsx)("i",{className:"fas fa-chevron-right text-gray-350"})]})})]})}}},function(e){e.O(0,[459,617,574,750,863,744],function(){return e(e.s=3509)}),_N_E=e.O()}]);