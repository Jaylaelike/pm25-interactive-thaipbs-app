(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6691:function(e,s,t){Promise.resolve().then(t.bind(t,4515))},172:function(e,s,t){"use strict";var l=t(7200),n=t(5535),a=t(5101),r=t(4211),c=t.n(r);s.Z=function(){let[e,s]=(0,n.useState)(c()().format("HH:mm:ss"));return(0,n.useEffect)(()=>{let e=setInterval(()=>{s(c()().format("HH:mm:ss"))},1e3);return()=>clearInterval(e)},[]),(0,l.jsx)("div",{children:(0,l.jsx)(a.E.div,{className:"flex items-center justify-center  rounded-xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:(0,l.jsx)(a.E.div,{className:"text-4xl font-mono text-white",initial:{scale:.5},animate:{scale:1},transition:{duration:.5},children:e})})})}},2423:function(e,s,t){"use strict";var l=t(7200);t(5535),s.Z=e=>{let{onClose:s}=e;return(0,l.jsxs)("div",{className:"text-gray-150",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsx)("button",{className:"text-2xl",onClick:s,children:(0,l.jsx)("i",{className:"fas fa-times"})})}),(0,l.jsxs)("div",{className:"flex justify-between my-5 space-x-4",children:[(0,l.jsx)("input",{type:"text",className:"border border-gray-150 bg-transparent p-3 flex-grow",placeholder:"search location"}),(0,l.jsx)("button",{className:"bg-[#3C47E9] py-3 px-5 hover:bg-[#3C47E9]/70",children:"Search"})]}),(0,l.jsx)("div",{className:"mt-20",children:(0,l.jsxs)("button",{className:"hover:border border-gray-250 px-4 py-6 w-full flex justify-between",children:[(0,l.jsx)("p",{children:"London"}),(0,l.jsx)("i",{className:"fas fa-chevron-right text-gray-350"})]})})]})}},4515:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var l=t(7200),n=function(){return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-5 w-full max-w-4xl h-6 rounded-full my-2 p-4",children:[(0,l.jsx)("span",{className:" text-center px-4 py-2 rounded-l-full bg-blue-500 text-white",children:"ดีมาก"}),(0,l.jsx)("span",{className:" text-center px-4 py-2 bg-green-500 text-white",children:"ดี"}),(0,l.jsx)("span",{className:" text-center px-4 py-2 bg-yellow-500 text-white",children:"ปานกลาง"}),(0,l.jsx)("span",{className:" text-center px-4 py-2 bg-orange-500 text-white",children:"เริ่มมีผลกระทบต่อสุขภาพ"}),(0,l.jsx)("span",{className:"  text-center px-4 py-2 rounded-r-full bg-red-500 text-white",children:"มีผลกระทบต่อสุขภาพ"})]})})})},a=e=>{let{title:s,num:t,desc:n,bgColors:a,children:r}=e;return(0,l.jsxs)("div",{className:"".concat(a," py-7 px-10 flex flex-col items-center justify-between space-y-4 rounded-lg"),children:[(0,l.jsx)("p",{children:s}),(0,l.jsxs)("h2",{className:"text-6xl font-bold",children:[t,(0,l.jsx)("span",{className:"text-4xl font-normal",children:n})]}),r]})},r=t(5535),c=t(172),i=t(2898),o=()=>{let[e,s]=(0,r.useState)({temperature:0,humidity:0,pm1:0,pm2_5:0,pm10:0}),[t,l]=(0,r.useState)("#2ECC71"),[n,a]=(0,r.useState)("#2ECC71");return(0,r.useEffect)(()=>{let e;let t=0;return(e=i.Z.connect("ws://172.16.202.63:8083/mqtt",{username:"admin",password:"public",clientId:"emqx_"+Math.random().toString(16).slice(2,10),keepalive:60,reconnectPeriod:5e3,connectTimeout:3e4,clean:!0})).on("connect",()=>{console.log("Connected to MQTT broker"),t=0,e.subscribe("sensor/data")}),e.on("error",e=>{console.error("MQTT connection error:",e),t<5&&(t++,console.log("Reconnection attempt ".concat(t,"...")))}),e.on("close",()=>{console.log("MQTT connection closed")}),e.on("offline",()=>{console.log("MQTT client is offline")}),e.on("message",(e,t)=>{if("sensor/data"===e)try{let e=JSON.parse(t.toString());s(e),e.pm2_5>23.6&&e.pm2_5<28?(l("#f1c40f"),a("#f1c40f")):e.pm2_5<=23.6?(l("#2ECC71"),a("#2ECC71")):e.pm2_5>=28&&(l("#e3901b"),a("#e3901b"))}catch(e){console.error("Error processing message:",e)}}),()=>{e&&e.end(!0,{},()=>{console.log("MQTT connection closed cleanly")})}},[]),{sensorData:e,bgColor:t,bgColorMain:n}},d=()=>{var e;let[s,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t(!0)},[]);let{sensorData:i,bgColorMain:d}=o(),x="#2ECC71"===d?"bg-[#2ECC71]":"#f1c40f"===d?"bg-[#f1c40f]":"#e3901b"===d?"bg-[#e3901b]":"#e74c3c"===d?"bg-[#e74c3c]":"#3498db"===d?"bg-[#3498db]":"bg-[#2ECC71]";return(0,l.jsxs)("div",{className:"text-gray-150 p-10 flex-grow pt-0",children:[(0,l.jsxs)("div",{className:"space-x-3 text-right",children:[(0,l.jsx)("button",{className:"bg-[#2ECC71] rounded-full w-10 h-10 text-gray-100 font-bold text-xl",children:"\xb0C"}),(0,l.jsx)("button",{className:"bg-gray-150 rounded-full w-10 h-10 text-darkblue font-bold text-xl",children:"\xb0F"})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-5 my-5 gap-5 justify-center",children:s?(0,l.jsx)(c.Z,{}):null}),(0,l.jsxs)("div",{className:"my-5",children:[(0,l.jsx)("h3",{className:" text-gray-350 text-2xl font-bold mb-5",children:"Todays Highlights"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 justify-center",children:[(0,l.jsx)(a,{title:"PM10",num:i.pm10,desc:"\xb5g/m\xb3",bgColors:x,children:(0,l.jsxs)("div",{className:"flex justify-between space-x-5 items-center",children:[(0,l.jsx)("div",{className:"bg-gray-500 rounded-full w-[30px] h-[30px] flex justify-center items-center",children:(0,l.jsx)("i",{className:"fas fa-location-arrow"})}),(0,l.jsx)("p",{className:"text-gray-150 text-sm"})]})}),(0,l.jsx)(a,{title:"ความชื้นสัมพัทธ์",num:i.humidity,desc:"%",bgColors:x,children:(0,l.jsxs)("div",{className:"self-stretch text-gray-250 text-xs space-y-1",children:[(0,l.jsxs)("div",{className:"flex justify-between space-x-5 items-center px-1",children:[(0,l.jsx)("p",{children:"0"}),(0,l.jsx)("p",{children:"50"}),(0,l.jsx)("p",{children:"100"})]}),(0,l.jsx)("div",{className:"w-full h-2 bg-gray-150 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"bg-[#FFEC65] h-2",style:{width:"84%"}})}),(0,l.jsx)("p",{className:"text-right",children:"%"})]})}),(0,l.jsx)(a,{title:"Temperature",num:i.temperature,bgColors:x,desc:" C"}),(0,l.jsx)(a,{title:"AQI",num:(e=i.pm2_5)<=12?Math.round(50/12*(e-0)+0):e<=35.4?Math.round(49/(35.4-12.1)*(e-12.1)+51):e<=55.4?Math.round(2.462311557788945*(e-35.5)+101):e<=150.4?Math.round(.5163329820864068*(e-55.5)+151):e<=250.4?Math.round(.990990990990991*(e-150.5)+201):e<=350.4?Math.round(99/(350.4-250.5)*(e-250.5)+301):Math.round(99/(500.4-350.5)*(e-350.5)+401),desc:"",bgColors:x})]}),(0,l.jsx)("div",{children:(0,l.jsx)(n,{})})]})]})},x=t(2423),m=t(693),u=e=>{var s;let{bgColors:t}=e,[n,a]=(0,r.useState)(!1),[c,o]=(0,r.useState)({temperature:0,humidity:0,pm1:0,pm2_5:0,pm10:0});return(0,r.useEffect)(()=>{let e=i.Z.connect("ws://172.16.202.63:8083/mqtt",{username:"admin",password:"public",clientId:"emqx_"+Math.random().toString(16).substr(2,8)});return e.on("connect",()=>{console.log("Connected to MQTT broker"),e.subscribe("sensor/data")}),e.on("message",(e,s)=>{"sensor/data"===e&&o(JSON.parse(s.toString()))}),()=>{e.end()}},[]),console.log(c),(0,l.jsx)("div",{className:"flex flex-col min-h-screen bg-[".concat(t,"] w-full lg:w-1/3 p-7 lg:p-4 xl:p-7 space-y-10 overflow-x-hidden pt-0"),children:n?(0,l.jsx)(x.Z,{onClose:()=>a(!1)}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative flex justify-between mb-10",children:(0,l.jsx)("button",{className:"static z-10 px-4 py-2 text bg-[#6E707A] hover:bg-[#6E707A]/70 text-gray-150 rounded-full shadow-lg",children:(0,l.jsx)("i",{className:"fas fa-map-marker-alt"})})}),(0,l.jsxs)("div",{className:"relative -mx-36 flex justify-center items-center max-h-40",children:[(0,l.jsx)(m.default,{src:"/images/Cloud-background.png",width:200,height:200,alt:"bg",className:"opacity-5 absolute max-w-52"}),(0,l.jsx)(m.default,{src:(s=c.pm2_5)<=12?"/images/happiness/very-happy.png":s<=35.4?"/images/happiness/happy.png":s<=55.4?"/images/happiness/neutral.png":s<=150.4?"/images/happiness/sad.png":"/images/happiness/very-sad.png",width:200,height:200,alt:"air quality indicator",className:"max-h-48 z-10"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between flex-grow pt-6",children:[null!==c.pm2_5&&(0,l.jsxs)("h1",{className:"text-gray-150 text-[144px] font-medium",children:[c.pm2_5,(0,l.jsx)("span",{className:"text-5xl text-gray-500",children:"\xb5g/m\xb3"})]}),(0,l.jsx)("h3",{className:"font-semibold text-4xl text-gray-500",children:"PM 2.5"}),(0,l.jsxs)("div",{className:"flex flex-col items-center text-center text-gray-350 text-lg space-y-5",children:[(0,l.jsxs)("p",{children:["Today •"," ",new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("i",{className:"fas fa-map-marker-alt"})," อาคาร A Thaipbs"]})]})]})]})})};function h(){let{bgColorMain:e,bgColor:s}=o(),[t,n]=r.useState("bg-green-500");return r.useEffect(()=>{n("#f1c40f"===e?"bg-yellow-300":"#e3901b"===e?"bg-yellow-500":"#e74c3c"===e?"bg-red-400":"#2ECC71"===e?"bg-green-500":"#3498db"===e?"bg-blue-500":"bg-green-500")},[e]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"".concat(t," flex flex-col lg:flex-row w-full h-full"),children:[(0,l.jsx)(u,{bgColors:s}),(0,l.jsx)(d,{})]})})}}},function(e){e.O(0,[459,617,750,863,744],function(){return e(e.s=6691)}),_N_E=e.O()}]);