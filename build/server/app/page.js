(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5409:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var r=s(7669),a=s(7367),i=s(7577),n=s.n(i),l=s(8403),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6893)),"/Users/sittichaimarkwisai/Desktop/pm25tpbs-app/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8281)),"/Users/sittichaimarkwisai/Desktop/pm25tpbs-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,4759,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5799))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/sittichaimarkwisai/Desktop/pm25tpbs-app/src/app/page.tsx"],x="/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},441:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,8501,23)),Promise.resolve().then(s.t.bind(s,9401,23)),Promise.resolve().then(s.t.bind(s,1031,23)),Promise.resolve().then(s.t.bind(s,641,23)),Promise.resolve().then(s.t.bind(s,7277,23)),Promise.resolve().then(s.t.bind(s,3286,23))},6686:(e,t,s)=>{Promise.resolve().then(s.bind(s,82))},5909:(e,t,s)=>{Promise.resolve().then(s.bind(s,6275))},1898:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(5109),a=s(8483),i=s(1087),n=s(5477),l=s.n(n);let c=function(){let[e,t]=(0,a.useState)(l()().format("HH:mm:ss"));return(0,a.useEffect)(()=>{let e=setInterval(()=>{t(l()().format("HH:mm:ss"))},1e3);return()=>clearInterval(e)},[]),r.jsx("div",{children:r.jsx(i.E.div,{className:"flex items-center justify-center  rounded-xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:r.jsx(i.E.div,{className:"text-4xl font-mono text-white",initial:{scale:.5},animate:{scale:1},transition:{duration:.5},children:e})})})}},82:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5109),a=s(3681),i=s(1841);s(8483);let n=new a.S,l=({children:e})=>r.jsx(i.aH,{client:n,children:e})},5616:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5109);s(8483);let a=({onClose:e})=>(0,r.jsxs)("div",{className:"text-gray-150",children:[r.jsx("div",{className:"text-right",children:r.jsx("button",{className:"text-2xl",onClick:e,children:r.jsx("i",{className:"fas fa-times"})})}),(0,r.jsxs)("div",{className:"flex justify-between my-5 space-x-4",children:[r.jsx("input",{type:"text",className:"border border-gray-150 bg-transparent p-3 flex-grow",placeholder:"search location"}),r.jsx("button",{className:"bg-[#3C47E9] py-3 px-5 hover:bg-[#3C47E9]/70",children:"Search"})]}),r.jsx("div",{className:"mt-20",children:(0,r.jsxs)("button",{className:"hover:border border-gray-250 px-4 py-6 w-full flex justify-between",children:[r.jsx("p",{children:"London"}),r.jsx("i",{className:"fas fa-chevron-right text-gray-350"})]})})]})},6275:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5109);let a=function(){return r.jsx("div",{children:r.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-5 w-full max-w-4xl h-6 rounded-full my-2 p-4",children:[r.jsx("span",{className:" text-center px-4 py-2 rounded-l-full bg-blue-500 text-white",children:`ด\u{e35}มาก`}),r.jsx("span",{className:" text-center px-4 py-2 bg-green-500 text-white",children:`ด\u{e35}`}),r.jsx("span",{className:" text-center px-4 py-2 bg-yellow-500 text-white",children:"ปานกลาง"}),r.jsx("span",{className:" text-center px-4 py-2 bg-orange-500 text-white",children:`เร\u{e34}\u{e48}มม\u{e35}ผลกระทบต\u{e48}อส\u{e38}ขภาพ`}),r.jsx("span",{className:"  text-center px-4 py-2 rounded-r-full bg-red-500 text-white",children:`ม\u{e35}ผลกระทบต\u{e48}อส\u{e38}ขภาพ`})]})})})},i=({title:e,num:t,desc:s,bgColors:a,children:i})=>(0,r.jsxs)("div",{className:`${a} py-7 px-10 flex flex-col items-center justify-between space-y-4 rounded-lg`,children:[r.jsx("p",{children:e}),(0,r.jsxs)("h2",{className:"text-6xl font-bold",children:[t,r.jsx("span",{className:"text-4xl font-normal",children:s})]}),i]});var n=s(8483),l=s.n(n),c=s(1898),o=s(6115),d=s.n(o);let x=()=>{let[e,t]=(0,n.useState)({temperature:0,humidity:0,pm1:0,pm2_5:0,pm10:0}),[s,r]=(0,n.useState)("#2ECC71"),[a,i]=(0,n.useState)("#2ECC71");return(0,n.useEffect)(()=>{let e;let s=0;return(e=d().connect("ws://172.16.202.63:8083/mqtt",{username:"admin",password:"public",clientId:"emqx_"+Math.random().toString(16).slice(2,10),keepalive:60,reconnectPeriod:5e3,connectTimeout:3e4,clean:!0})).on("connect",()=>{console.log("Connected to MQTT broker"),s=0,e.subscribe("sensor/data")}),e.on("error",e=>{console.error("MQTT connection error:",e),s<5&&(s++,console.log(`Reconnection attempt ${s}...`))}),e.on("close",()=>{console.log("MQTT connection closed")}),e.on("offline",()=>{console.log("MQTT client is offline")}),e.on("message",(e,s)=>{if("sensor/data"===e)try{let e=JSON.parse(s.toString());t(e),e.pm2_5>23.6&&e.pm2_5<28?(r("#f1c40f"),i("#f1c40f")):e.pm2_5<=23.6?(r("#2ECC71"),i("#2ECC71")):e.pm2_5>=28&&(r("#e3901b"),i("#e3901b"))}catch(e){console.error("Error processing message:",e)}}),()=>{e&&e.end(!0,{},()=>{console.log("MQTT connection closed cleanly")})}},[]),{sensorData:e,bgColor:s,bgColorMain:a}},p=()=>{let[e,t]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t(!0)},[]);let{sensorData:s,bgColorMain:l}=x(),o="#2ECC71"===l?"bg-[#2ECC71]":"#f1c40f"===l?"bg-[#f1c40f]":"#e3901b"===l?"bg-[#e3901b]":"#e74c3c"===l?"bg-[#e74c3c]":"#3498db"===l?"bg-[#3498db]":"bg-[#2ECC71]";return(0,r.jsxs)("div",{className:"text-gray-150 p-10 flex-grow pt-0",children:[(0,r.jsxs)("div",{className:"space-x-3 text-right",children:[r.jsx("button",{className:"bg-[#2ECC71] rounded-full w-10 h-10 text-gray-100 font-bold text-xl",children:"\xb0C"}),r.jsx("button",{className:"bg-gray-150 rounded-full w-10 h-10 text-darkblue font-bold text-xl",children:"\xb0F"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-5 my-5 gap-5 justify-center",children:e?r.jsx(c.Z,{}):null}),(0,r.jsxs)("div",{className:"my-5",children:[r.jsx("h3",{className:" text-gray-350 text-2xl font-bold mb-5",children:"Todays Highlights"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 justify-center",children:[r.jsx(i,{title:"PM10",num:s.pm10,desc:"\xb5g/m\xb3",bgColors:o,children:(0,r.jsxs)("div",{className:"flex justify-between space-x-5 items-center",children:[r.jsx("div",{className:"bg-gray-500 rounded-full w-[30px] h-[30px] flex justify-center items-center",children:r.jsx("i",{className:"fas fa-location-arrow"})}),r.jsx("p",{className:"text-gray-150 text-sm"})]})}),r.jsx(i,{title:"ความชื้นสัมพัทธ์",num:s.humidity,desc:"%",bgColors:o,children:(0,r.jsxs)("div",{className:"self-stretch text-gray-250 text-xs space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between space-x-5 items-center px-1",children:[r.jsx("p",{children:"0"}),r.jsx("p",{children:"50"}),r.jsx("p",{children:"100"})]}),r.jsx("div",{className:"w-full h-2 bg-gray-150 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-[#FFEC65] h-2",style:{width:"84%"}})}),r.jsx("p",{className:"text-right",children:"%"})]})}),r.jsx(i,{title:"Temperature",num:s.temperature,bgColors:o,desc:" C"}),r.jsx(i,{title:"AQI",num:(e=>e<=12?Math.round(50/12*(e-0)+0):e<=35.4?Math.round(49/(35.4-12.1)*(e-12.1)+51):e<=55.4?Math.round(2.462311557788945*(e-35.5)+101):e<=150.4?Math.round(.5163329820864068*(e-55.5)+151):e<=250.4?Math.round(.990990990990991*(e-150.5)+201):e<=350.4?Math.round(99/(350.4-250.5)*(e-250.5)+301):Math.round(99/(500.4-350.5)*(e-350.5)+401))(s.pm2_5),desc:"",bgColors:o})]}),r.jsx("div",{children:r.jsx(a,{})})]})]})};var u=s(5616),m=s(7874);let h=({bgColors:e})=>{var t;let[s,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)({temperature:0,humidity:0,pm1:0,pm2_5:0,pm10:0});return(0,n.useEffect)(()=>{let e=d().connect("ws://172.16.202.63:8083/mqtt",{username:"admin",password:"public",clientId:"emqx_"+Math.random().toString(16).substr(2,8)});return e.on("connect",()=>{console.log("Connected to MQTT broker"),e.subscribe("sensor/data")}),e.on("message",(e,t)=>{"sensor/data"===e&&l(JSON.parse(t.toString()))}),()=>{e.end()}},[]),console.log(i),r.jsx("div",{className:`flex flex-col min-h-screen bg-[${e}] w-full lg:w-1/3 p-7 lg:p-4 xl:p-7 space-y-10 overflow-x-hidden pt-0`,children:s?r.jsx(u.Z,{onClose:()=>a(!1)}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"relative flex justify-between mb-10",children:r.jsx("button",{className:"static z-10 px-4 py-2 text bg-[#6E707A] hover:bg-[#6E707A]/70 text-gray-150 rounded-full shadow-lg",children:r.jsx("i",{className:"fas fa-map-marker-alt"})})}),(0,r.jsxs)("div",{className:"relative -mx-36 flex justify-center items-center max-h-40",children:[r.jsx(m.default,{src:"/images/Cloud-background.png",width:200,height:200,alt:"bg",className:"opacity-5 absolute max-w-52"}),r.jsx(m.default,{src:(t=i.pm2_5)<=12?"/images/happiness/very-happy.png":t<=35.4?"/images/happiness/happy.png":t<=55.4?"/images/happiness/neutral.png":t<=150.4?"/images/happiness/sad.png":"/images/happiness/very-sad.png",width:200,height:200,alt:"air quality indicator",className:"max-h-48 z-10"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-between flex-grow pt-6",children:[null!==i.pm2_5&&(0,r.jsxs)("h1",{className:"text-gray-150 text-[144px] font-medium",children:[i.pm2_5,r.jsx("span",{className:"text-5xl text-gray-500",children:"\xb5g/m\xb3"})]}),r.jsx("h3",{className:"font-semibold text-4xl text-gray-500",children:"PM 2.5"}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center text-gray-350 text-lg space-y-5",children:[(0,r.jsxs)("p",{children:["Today •"," ",new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),(0,r.jsxs)("p",{children:[r.jsx("i",{className:"fas fa-map-marker-alt"})," อาคาร A Thaipbs"]})]})]})]})})};function g(){let{bgColorMain:e,bgColor:t}=x(),[s,a]=l().useState("bg-green-500");return l().useEffect(()=>{a("#f1c40f"===e?"bg-yellow-300":"#e3901b"===e?"bg-yellow-500":"#e74c3c"===e?"bg-red-400":"#2ECC71"===e?"bg-green-500":"#3498db"===e?"bg-blue-500":"bg-green-500")},[e]),r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:`${s} flex flex-col lg:flex-row w-full h-full`,children:[r.jsx(h,{bgColors:t}),r.jsx(p,{})]})})}},8281:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>d});var r=s(8399),a=s(4550),i=s.n(a);s(3601);let n=(0,s(2720).createProxy)(String.raw`/Users/sittichaimarkwisai/Desktop/pm25tpbs-app/src/app/components/Providers.tsx`),{__esModule:l,$$typeof:c}=n,o=n.default,d={title:"Create Next App",description:"Generated by create next app"};function x({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:r.jsx(o,{children:r.jsx("div",{className:"items-center justify-center w-full",children:e})})})})}},6893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(2720).createProxy)(String.raw`/Users/sittichaimarkwisai/Desktop/pm25tpbs-app/src/app/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},5799:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(9872);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},3601:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[979,407,355],()=>s(5409));module.exports=r})();